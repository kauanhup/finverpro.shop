======================================================================
FINVER PRO - ARQUIVOS AFETADOS PELA REESTRUTURAÃ‡ÃƒO DO BANCO DE DADOS
======================================================================

ğŸ“ PASTA: /public_html/
=======================

ğŸ”§ ARQUIVO: index.php (Linha 111)
   MUDANÃ‡A: Tabela 'usuarios' reestruturada
   ALTERAÃ‡ÃƒO NECESSÃRIA: 
   - Campo 'cargo' foi substituÃ­do por 'tipo_usuario' (enum: 'usuario','admin','moderador')
   - Adicionar campo 'status' nas verificaÃ§Ãµes
   - Query: "SELECT id, telefone, senha, tipo_usuario, status FROM usuarios WHERE telefone = :telefone"

ğŸ“ PASTA: /public_html/team/
============================

ğŸ”§ ARQUIVO: processar_transferencia.php (Linhas 40, 61)
   MUDANÃ‡A: Sistema financeiro unificado - nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Substituir atualizaÃ§Ãµes diretas em 'usuarios.saldo' por 'carteiras.saldo_principal'
   - Queries: "UPDATE carteiras SET saldo_principal = saldo_principal + ? WHERE usuario_id = ?"
   - Queries: "SELECT saldo_principal FROM carteiras WHERE usuario_id = ?"

ğŸ”§ ARQUIVO: verificar.php (Linhas 19, 30, 58, 97)
   MUDANÃ‡A: Tabela 'usuarios' reestruturada + nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Campo 'codigo_referencia' mantido
   - Campo 'referencia_convite' mudou para 'referenciado_por'
   - Saldo de comissÃ£o agora em 'carteiras.saldo_comissao'
   - Queries: "SELECT codigo_referencia FROM usuarios WHERE id = ?"
   - Queries: "SELECT id, codigo_referencia FROM usuarios WHERE referenciado_por = ?"
   - Queries: "UPDATE carteiras SET saldo_comissao = ? WHERE usuario_id = ?"

ğŸ”§ ARQUIVO: index.php (Linhas 46, 113, 118)
   MUDANÃ‡A: Tabela 'usuarios' reestruturada
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Subconsultas para buscar indicados agora usam 'referenciado_por'
   - Query: "SELECT u2.id FROM usuarios u1 JOIN usuarios u2 ON u2.referenciado_por = u1.id"

ğŸ”§ ARQUIVO: salary/index.php (Linhas 176, 301)
   MUDANÃ‡A: Nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - AtualizaÃ§Ãµes de saldo agora em tabela 'carteiras'
   - Query: "UPDATE carteiras SET saldo_principal = saldo_principal + ? WHERE usuario_id = ?"
   - Query: "SELECT nome, email, c.saldo_principal, c.saldo_comissao FROM usuarios u JOIN carteiras c ON u.id = c.usuario_id WHERE u.id = ?"

ğŸ“ PASTA: /public_html/retirar/dinheiro/
=======================================

ğŸ”§ ARQUIVO: index.php (Linhas 202, 300)
   MUDANÃ‡A: Nova tabela 'carteiras' + nova tabela 'operacoes_financeiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Buscar saldo em 'carteiras.saldo_principal'
   - Criar registro em 'operacoes_financeiras' em vez de 'saques'
   - Query: "SELECT c.saldo_principal, u.nome, u.telefone FROM usuarios u JOIN carteiras c ON u.id = c.usuario_id WHERE u.id = ?"
   - Query: "UPDATE carteiras SET saldo_principal = ? WHERE usuario_id = ?"
   - Inserir em 'operacoes_financeiras' com tipo='saque'

ğŸ“ PASTA: /public_html/relatorios/
==================================

ğŸ”§ ARQUIVO: index.php (Linhas 62, 80, 68)
   MUDANÃ‡A: Tabela 'usuarios' reestruturada + nova tabela 'operacoes_financeiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Campo 'referencia_convite' mudou para 'referenciado_por'
   - Tabela 'pagamentos' unificada em 'operacoes_financeiras'
   - Query: "SELECT telefone, data_cadastro, c.total_depositado FROM usuarios u JOIN carteiras c ON u.id = c.usuario_id WHERE u.referenciado_por = :user_id"
   - Query: "SELECT status, data_processamento, valor_liquido FROM operacoes_financeiras WHERE usuario_id = :user_id AND tipo = 'deposito'"

ğŸ“ PASTA: /public_html/perfil/alterar-foto/
==========================================

ğŸ”§ ARQUIVOS: upload_foto.php, remove_foto.php, get_current_photo.php
   MUDANÃ‡A: Tabela 'usuarios' mantida, sem alteraÃ§Ãµes necessÃ¡rias
   ALTERAÃ‡ÃƒO NECESSÃRIA: Nenhuma (campos mantidos)

ğŸ“ PASTA: /public_html/investimentos/
====================================

ğŸ”§ ARQUIVO: processar_ciclo.php (Linhas 180, 222, 257, 187, 227, 261)
   MUDANÃ‡A: Nova tabela 'carteiras' + tabela 'investimentos' reestruturada
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - AtualizaÃ§Ãµes de saldo em 'carteiras.saldo_principal'
   - Campo 'renda_total' mudou para 'rendimento_acumulado'
   - Query: "UPDATE carteiras SET saldo_principal = saldo_principal + ? WHERE usuario_id = ?"
   - Query: "UPDATE investimentos SET rendimento_acumulado = rendimento_acumulado + ? WHERE id = ?"

ğŸ”§ ARQUIVO: processar_investimento.php (Linhas 84, 109, 140, 334, 392, 69, 117, 136)
   MUDANÃ‡A: Nova tabela 'carteiras' + nova estrutura de comissÃµes + nova tabela 'investimentos'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Buscar saldo em 'carteiras.saldo_principal'
   - Debitar saldo de 'carteiras.saldo_principal'
   - Campo 'referenciado_por' em vez de buscar por 'referencia_convite'
   - Atualizar 'produtos.vendidos'
   - Inserir em nova estrutura de 'investimentos'
   - Sistema de comissÃµes pela nova tabela 'comissoes'

ğŸ”§ ARQUIVO: index.php (Linhas 98, 103)
   MUDANÃ‡A: Tabela 'investimentos' reestruturada
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Subconsultas agora usam nova estrutura de 'investimentos'
   - Verificar relaÃ§Ã£o com 'usuario_id' em vez de 'id_usuario'

ğŸ“ PASTA: /public_html/inicio/
==============================

ğŸ”§ ARQUIVO: index.php (Linha 92)
   MUDANÃ‡A: Tabela 'usuarios' reestruturada
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Campos mantidos, possÃ­vel adiÃ§Ã£o de novos campos na consulta
   - Query: "SELECT *, tipo_usuario, status FROM usuarios WHERE id = :user_id"

ğŸ“ PASTA: /public_html/gate/
============================

ğŸ”§ ARQUIVO: api.php (Linhas 397, 435, 443)
   MUDANÃ‡A: Nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Buscar e atualizar saldo em 'carteiras.saldo_principal'
   - Query: "SELECT u.telefone FROM usuarios u WHERE u.id = :user_id"
   - Query: "SELECT saldo_principal FROM carteiras WHERE usuario_id = :user_id"
   - Query: "UPDATE carteiras SET saldo_principal = :newBalance WHERE usuario_id = :user_id"

ğŸ”§ ARQUIVO: webhook.php (Linhas 283, 296, 167, 264)
   MUDANÃ‡A: Nova tabela 'carteiras' + nova tabela 'operacoes_financeiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Atualizar 'carteiras.saldo_principal'
   - Buscar pagamentos em 'operacoes_financeiras' com tipo='deposito'
   - Query: "SELECT usuario_id, valor_liquido, status FROM operacoes_financeiras WHERE codigo_referencia = :id AND tipo = 'deposito'"
   - Query: "UPDATE operacoes_financeiras SET status = :status, data_processamento = :data WHERE codigo_referencia = :idTransaction"

ğŸ”§ ARQUIVO: verificar.php (Linhas 69, 437, 457, 465)
   MUDANÃ‡A: Nova tabela 'operacoes_financeiras' + nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Buscar em 'operacoes_financeiras' em vez de 'pagamentos'
   - Atualizar saldo em 'carteiras'
   - Query: "SELECT * FROM operacoes_financeiras WHERE codigo_referencia = :ref AND tipo = 'deposito'"
   - Query: "UPDATE operacoes_financeiras SET status = :status, data_processamento = :data WHERE codigo_referencia = :idTransaction"

ğŸ“ PASTA: /public_html/detalhes/investimento/
============================================

ğŸ”§ ARQUIVO: concluir.php (Linhas 34, 45, 62)
   MUDANÃ‡A: Nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Buscar e atualizar saldo em 'carteiras'
   - Campo 'valor_investimento' agora em 'carteiras.total_investido'
   - Query: "SELECT c.saldo_principal, c.total_investido FROM carteiras c WHERE c.usuario_id = :user_id"
   - Query: "UPDATE carteiras SET saldo_principal = :new_saldo, total_investido = :new_valor_investimento WHERE usuario_id = :user_id"

ğŸ”§ ARQUIVO: index.php (Linha 86)
   MUDANÃ‡A: Tabela 'produtos' reestruturada
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Campos renomeados: 'valor_investimento' -> 'valor_minimo', 'renda_diaria' -> 'rendimento_diario'
   - Query: "SELECT *, valor_minimo, rendimento_diario FROM produtos WHERE id = :id"

ğŸ“ PASTA: /public_html/checklist/
=================================

ğŸ”§ ARQUIVO: index.php (Linhas 63, 76)
   MUDANÃ‡A: Nova tabela 'checklist_diario'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Migrar para nova estrutura de checklist
   - Query: "SELECT dia_consecutivo, ultimo_checkin FROM checklist_diario WHERE usuario_id = :id"
   - Query: "UPDATE checklist_diario SET dia_consecutivo = 0, ultimo_checkin = NULL WHERE usuario_id = :id"

ğŸ”§ ARQUIVO: checklist.php (Linhas 65, 87, 132)
   MUDANÃ‡A: Nova tabela 'carteiras' + nova tabela 'checklist_diario'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Buscar saldo em 'carteiras'
   - Usar nova estrutura de checklist
   - Query: "SELECT c.saldo_principal, ch.dia_consecutivo, ch.ultimo_checkin FROM carteiras c JOIN checklist_diario ch ON c.usuario_id = ch.usuario_id WHERE c.usuario_id = :id"
   - Query: "UPDATE carteiras SET saldo_principal = :saldo WHERE usuario_id = :id"

ğŸ“ PASTA: /public_html/bonus/
=============================

ğŸ”§ ARQUIVO: verifica.php (Linhas 69, 83)
   MUDANÃ‡A: Nova tabela 'carteiras' + nova tabela 'bonus_utilizados'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Buscar e atualizar saldo em 'carteiras.saldo_bonus'
   - Registrar uso em 'bonus_utilizados'
   - Query: "SELECT saldo_bonus FROM carteiras WHERE usuario_id = ?"
   - Query: "UPDATE carteiras SET saldo_bonus = ? WHERE usuario_id = ?"

ğŸ”§ ARQUIVO: index.php (Linha 109)
   MUDANÃ‡A: Nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Query: "SELECT saldo_bonus FROM carteiras WHERE usuario_id = ?"

ğŸ“ PASTA: /public_html/cadastro/
===============================

ğŸ”§ ARQUIVO: send_sms.php (Linha 53)
   MUDANÃ‡A: Tabela 'usuarios' mantida
   ALTERAÃ‡ÃƒO NECESSÃRIA: Nenhuma

ğŸ”§ ARQUIVO: autentificacao.php (Linhas 94, 102, 114, 169, 182, 222, 239)
   MUDANÃ‡A: Tabela 'usuarios' reestruturada + nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - VerificaÃ§Ãµes mantidas
   - Campo 'referencia_convite' mudou para 'referenciado_por'
   - Criar registro em 'carteiras' para novos usuÃ¡rios
   - Atualizar saldo em 'carteiras' para bÃ´nus
   - Query: "INSERT INTO carteiras (usuario_id, saldo_bonus) VALUES (?, ?)"
   - Query: "UPDATE carteiras SET saldo_bonus = saldo_bonus + ? WHERE usuario_id = ?"

ğŸ“ PASTA: /public_html/administracao/
====================================

ğŸ”§ ARQUIVO: transacao-investidores/index.php (Linha 22)
   MUDANÃ‡A: Campo 'cargo' mudou para 'tipo_usuario'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Query: "SELECT tipo_usuario FROM usuarios WHERE id = :user_id"

ğŸ”§ ARQUIVO: usuarios/index.php (Linhas 23, 46, 47, 48, 49)
   MUDANÃ‡A: MÃºltiplas tabelas reestruturadas
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Campo 'cargo' -> 'tipo_usuario'
   - Tabela 'investidores' -> 'investimentos'
   - Tabela 'pagamentos' -> 'operacoes_financeiras'
   - Saldo em 'carteiras'
   - Query: "SELECT tipo_usuario FROM usuarios WHERE id = :user_id"
   - Subconsultas: "SELECT COUNT(*) FROM usuarios WHERE referenciado_por = u.codigo_referencia"
   - Subconsultas: "SELECT SUM(valor_investido) FROM investimentos WHERE usuario_id = u.id"
   - Subconsultas: "SELECT SUM(valor_liquido) FROM operacoes_financeiras WHERE usuario_id = u.id AND tipo = 'deposito' AND status = 'aprovado'"

ğŸ”§ ARQUIVO: usuarios/editar.php (Linhas 35, 36, 37, 38)
   MUDANÃ‡A: Mesmas alteraÃ§Ãµes do arquivo anterior
   ALTERAÃ‡ÃƒO NECESSÃRIA: Mesmas queries atualizadas

ğŸ”§ ARQUIVO: usuarios/atualizar.php (Linha 28)
   MUDANÃ‡A: Tabela 'usuarios' mantida estrutura bÃ¡sica
   ALTERAÃ‡ÃƒO NECESSÃRIA: Nenhuma para UPDATE bÃ¡sico

ğŸ”§ ARQUIVO: saidas-usuarios/index.php (Linhas 18, 137)
   MUDANÃ‡A: Campo 'cargo' -> 'tipo_usuario' + nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Query: "SELECT tipo_usuario FROM usuarios WHERE id = :user_id"
   - Query: "UPDATE carteiras SET saldo_principal = saldo_principal + :valor WHERE usuario_id = :user_id"

ğŸ”§ ARQUIVO: entradas-geral/index.php (Linhas 20, 48, 39, 52, 107)
   MUDANÃ‡A: Campo 'cargo' -> 'tipo_usuario' + nova tabela 'operacoes_financeiras' + nova tabela 'carteiras'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Query: "SELECT tipo_usuario FROM usuarios WHERE id = :user_id"
   - Query: "SELECT usuario_id, valor_liquido FROM operacoes_financeiras WHERE id = :id AND status = 'pendente' AND tipo = 'deposito'"
   - Query: "UPDATE operacoes_financeiras SET status = 'aprovado' WHERE id = :id"
   - Query: "SELECT id, usuario_id, valor_liquido, codigo_referencia, status, data_processamento FROM operacoes_financeiras WHERE tipo = 'deposito'"

ğŸ”§ ARQUIVO: dashboard/index.php (Linhas 24, 55, 99, 113, 125, 130, 135, 140)
   MUDANÃ‡A: MÃºltiplas tabelas reestruturadas
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Campo 'cargo' -> 'tipo_usuario'
   - Tabela 'pagamentos' -> 'operacoes_financeiras'
   - Query: "SELECT tipo_usuario FROM usuarios WHERE id = :user_id"
   - Query: "SELECT data_processamento, valor_liquido FROM operacoes_financeiras WHERE status = 'aprovado' AND tipo = 'deposito'"
   - Query: "SELECT MONTH(data_processamento) AS mes, SUM(valor_liquido) AS total FROM operacoes_financeiras WHERE status = 'aprovado' AND tipo = 'deposito'"

ğŸ”§ MÃšLTIPLOS ARQUIVOS em /configuracao-produtos/, /configuracoes_sistema/, etc.
   MUDANÃ‡A: Campo 'cargo' -> 'tipo_usuario'
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Substituir "SELECT cargo FROM usuarios" por "SELECT tipo_usuario FROM usuarios"

ğŸ“ PASTA: /public/bank/
======================

ğŸ”§ ARQUIVO: database.php (Linhas 378, 381, 384, 389, 392, 395, 595)
   MUDANÃ‡A: MÃºltiplas tabelas reestruturadas
   ALTERAÃ‡ÃƒO NECESSÃRIA:
   - Queries estatÃ­sticas precisam ser atualizadas para novas tabelas
   - 'investimentos' mantido nome mas estrutura alterada
   - 'usuarios' com novos campos

======================================================================
RESUMO DE MUDANÃ‡AS PRINCIPAIS:
======================================================================

1. ğŸ”„ TABELA 'usuarios':
   - Campo 'cargo' â†’ 'tipo_usuario' (enum)
   - Campo 'referencia_convite' â†’ 'referenciado_por' (FK)
   - Novos campos: 'status', 'ultimo_login'
   - RemoÃ§Ã£o de campos financeiros (movidos para 'carteiras')

2. ğŸ†• NOVA TABELA 'carteiras':
   - Unifica todos os saldos (principal, bonus, comissao)
   - Relaciona 1:1 com usuarios
   - Campos: saldo_principal, saldo_bonus, saldo_comissao, total_depositado, total_sacado, total_investido

3. ğŸ”„ TABELA 'investimentos' (unificada):
   - Remove duplicaÃ§Ã£o com 'investidores'
   - Campo 'renda_total' â†’ 'rendimento_acumulado'
   - Melhor estrutura com FKs

4. ğŸ”„ TABELA 'produtos':
   - Campo 'valor_investimento' â†’ 'valor_minimo'
   - Campo 'renda_diaria' â†’ 'rendimento_diario'
   - Novo campo 'codigo_produto'

5. ğŸ”„ UNIFICAÃ‡ÃƒO 'pagamentos' + 'saques':
   - Nova tabela 'operacoes_financeiras'
   - Campos padronizados
   - Status unificados

6. ğŸ†• NOVA TABELA 'configuracoes':
   - Unifica todas as configuraÃ§Ãµes do sistema
   - Estrutura categoria/chave/valor

7. ğŸ†• NOVAS TABELAS DE AUDITORIA:
   - 'logs_sistema' para auditoria
   - 'tentativas_login' para seguranÃ§a

======================================================================